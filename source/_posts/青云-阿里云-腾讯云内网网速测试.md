title: '青云,阿里云, 腾讯云内网网速测试'
date: 2015-04-02 17:18:04
tags: network
---

今天使用[iperf3](https://github.com/esnet/iperf)来测试了一下现在国内主流的三大IaaS厂商的内网通讯速度, 发现阿里云最慢啊.

>> 注: 这并不是一个非常严谨的测试, 个人不承担相应的责任, 不过自己在考虑使用哪个平台的云服务的时候, 很是一个指标.

我们的服务有很多内网之间通讯的需求, 例如, cassandra数据节点之间的同步, 调用zookeeper, 发送消息到kafka中等等, 都需要使用大量的网络带宽, 所以也比较重视这一点.

具体的测试结果见图片:

## 阿里云的测试结果

![ali](/images/network-speed-cloud/ali.jpg)

## 腾讯云的测试结果

![qq](/images/network-speed-cloud/qq.jpg)

## 青云的测试结果

![qing](/images/network-speed-cloud/qing-cloud.jpg)

从图中就可以看出, 阿里云几乎比另外两家慢了一倍, 而青云和腾讯云相比则略胜一筹.

另外, 发现[iperf3](https://github.com/esnet/iperf)真是个好东西啊, 用来模拟各种网络情况, 具体见下面的各种配置参数

      -u, --udp                 use UDP rather than TCP
      -b, --bandwidth #[KMG][/#] target bandwidth in bits/sec
                                (default 1 Mbit/sec for UDP, unlimited for TCP)
                                (optional slash and packet count for burst mode)
      -t, --time      #         time in seconds to transmit for (default 10 secs)
      -n, --num       #[KMG]    number of bytes to transmit (instead of -t)
      -k, --blockcount #[KMG]   number of blocks (packets) to transmit (instead of -t or -n)
      -l, --len       #[KMG]    length of buffer to read or write
                                (default 128 KB for TCP, 8 KB for UDP)
      -P, --parallel  #         number of parallel client streams to run
      -R, --reverse             run in reverse mode (server sends, client receives)
      -w, --window    #[KMG]    TCP window size (socket buffer size)
      -B, --bind      <host>    bind to a specific interface or multicast address
      -C, --linux-congestion <algo>  set TCP congestion control algorithm (Linux only)
      -M, --set-mss   #         set TCP maximum segment size (MTU - 40 bytes)
      -N, --nodelay             set TCP no delay, disabling Nagle's Algorithm
      -4, --version4            only use IPv4
      -6, --version6            only use IPv6
      -S, --tos N               set the IP 'type of service'
      -L, --flowlabel N         set the IPv6 flow label (only supported on Linux)
      -Z, --zerocopy            use a 'zero copy' method of sending data
      -O, --omit N              omit the first n seconds
      -T, --title str           prefix every output line with this string
      --get-server-output       get results from server